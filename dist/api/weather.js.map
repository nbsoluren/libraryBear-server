{"version":3,"sources":["../../src/api/weather.js"],"names":["weather","temperature","db","req","res","location","body","queryResult","parameters","address","weatherjs","find","search","degreeType","err","result","console","log","json","fulfillmentText","length","current","observationpoint","skytext","toLowerCase","unit"],"mappings":";;;;;QAGgBA,O,GAAAA,O;QAiBAC,W,GAAAA,W;;AApBhB;;;;AACA;;;;;;AAEO,SAASD,OAAT,CAAiBE,EAAjB,EAAqBC,GAArB,EAA0BC,GAA1B,EAA+B;AACrC,WAAMC,WAAWF,IAAIG,IAAJ,CAASC,WAAT,CAAqBC,UAArB,CAAgCC,OAAhC,IAA2C,EAA3C,GAA+CN,IAAIG,IAAJ,CAASC,WAAT,CAAqBC,UAArB,CAAgCC,OAA/E,GAAyF,QAA1G;;AAEAC,2BAAUC,IAAV,CAAe,EAACC,QAAQP,QAAT,EAAmBQ,YAAY,GAA/B,EAAf,EAAoD,UAASC,GAAT,EAAcC,MAAd,EAAsB;AACnE,kBAAGD,GAAH,EAAQ;AACPE,6BAAQC,GAAR,CAAYH,GAAZ;AACAV,yBAAIc,IAAJ,CAAS,EAAEC,iBAAiB,UAAnB,EAAT;AACA,eAHD,MAGO;AACN,yBAAGJ,OAAOK,MAAV,EAAkB;AACjBhB,gCAAIc,IAAJ,CAAS,EAAEC,iBAAiB,oBAAoBJ,OAAO,CAAP,EAAUM,OAAV,CAAkBC,gBAAtC,sBAA4EP,OAAO,CAAP,EAAUM,OAAV,CAAkBE,OAAlB,CAA0BC,WAA1B,EAA5E,sDAAnB,EAAT;AACA,sBAFD,MAEO;AACNpB,gCAAIc,IAAJ,CAAS,EAAEC,mFAAF,EAAT;AACA;AACD;AACJ,QAXJ;AAYA;;AAEM,SAASlB,WAAT,CAAqBC,EAArB,EAAyBC,GAAzB,EAA8BC,GAA9B,EAAmC;AACzC,WAAMC,WAAWF,IAAIG,IAAJ,CAASC,WAAT,CAAqBC,UAArB,CAAgCC,OAAhC,IAA2C,EAA3C,GAA+CN,IAAIG,IAAJ,CAASC,WAAT,CAAqBC,UAArB,CAAgCC,OAA/E,GAAyF,QAA1G;AACA,WAAMgB,OAAOtB,IAAIG,IAAJ,CAASC,WAAT,CAAqBC,UAArB,CAAgCiB,IAAhC,IAAwC,EAAxC,GAA4CtB,IAAIG,IAAJ,CAASC,WAAT,CAAqBC,UAArB,CAAgCiB,IAA5E,GAAmF,GAAhG;;AAEAf,2BAAUC,IAAV,CAAe,EAACC,QAAQP,QAAT,EAAmBQ,YAAYY,IAA/B,EAAf,EAAqD,UAASX,GAAT,EAAcC,MAAd,EAAsB;AACpE,kBAAGD,GAAH,EAAQ;AACPE,6BAAQC,GAAR,CAAYH,GAAZ;AACAV,yBAAIc,IAAJ,CAAS,EAAEC,iBAAiB,UAAnB,EAAT;AACA,eAHD,MAGO;AACN,yBAAGJ,OAAOK,MAAV,EAAkB;AACjBhB,gCAAIc,IAAJ,CAAS,EAAEC,iBAAiB,WAAWJ,OAAO,CAAP,EAAUM,OAAV,CAAkBpB,WAA7B,YAAiDwB,IAAjD,sBAA2EV,OAAO,CAAP,EAAUM,OAAV,CAAkBC,gBAA7F,sDAAnB,EAAT;AACA,sBAFD,MAEO;AACNlB,gCAAIc,IAAJ,CAAS,EAAEC,mFAAF,EAAT;AACA;AACD;AACJ,QAXJ;AAYA","file":"weather.js","sourcesContent":["import fetch from 'node-fetch';\nimport weatherjs from 'weather-js'\n\nexport function weather(db, req, res) {\n\tconst location = req.body.queryResult.parameters.address != ''? req.body.queryResult.parameters.address : 'Manila';\n\t\n\tweatherjs.find({search: location, degreeType: 'C'}, function(err, result) {\n        if(err) {\n        \tconsole.log(err);\n        \tres.json({ fulfillmentText: 'Error üëæ' })\n        } else {\n        \tif(result.length) {\n        \t\tres.json({ fulfillmentText: `The weather in ` + result[0].current.observationpoint + ` right now is ` + result[0].current.skytext.toLowerCase() + ` üåû‚òÅÔ∏è‚ùÑÔ∏èüåô` });\n        \t} else {\n        \t\tres.json({ fulfillmentText: `Oops, I don\\'t know where that is ü§∑‚Äç‚ôÄÔ∏è` })\n        \t}\n        }\n    });\n}\n\nexport function temperature(db, req, res) {\n\tconst location = req.body.queryResult.parameters.address != ''? req.body.queryResult.parameters.address : 'Manila';\n\tconst unit = req.body.queryResult.parameters.unit != ''? req.body.queryResult.parameters.unit : 'C';\n\n\tweatherjs.find({search: location, degreeType: unit}, function(err, result) {\n        if(err) {\n        \tconsole.log(err);\n        \tres.json({ fulfillmentText: 'Error üëæ' })\n        } else {\n        \tif(result.length) {\n        \t\tres.json({ fulfillmentText: `It is ` + result[0].current.temperature + `¬∞` + unit + ` right now in ` + result[0].current.observationpoint + ` üåû‚òÅÔ∏è‚ùÑÔ∏èüåô` });\n        \t} else {\n        \t\tres.json({ fulfillmentText: `Oops, I don\\'t know where that is ü§∑‚Äç‚ôÄÔ∏è` })\n        \t}\n        }\n    });\n}"]}