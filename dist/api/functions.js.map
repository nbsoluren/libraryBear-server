{"version":3,"sources":["../../src/api/functions.js"],"names":["pushMessage","sendToAllFb","pushToFacebook","id","payload","url","pageAccessToken","headers","method","body","JSON","stringify","catch","e","console","log","message","messaging_type","recipient","text","rows","i","length"],"mappings":";;;;;QAcgBA,W,GAAAA,W;QAYAC,W,GAAAA,W;;AA1BhB;;;;;;AAEA,SAASC,cAAT,CAAwBC,EAAxB,EAA4BC,OAA5B,EAAqC;AACpC,KAAMC,MAAM,2DAAZ;AACA,KAAMC,kBAAkB,OAAxB;;AAEA,0BAAMD,MAAMC,eAAZ,EAA6B;AAC5BC,WAAS,EAAE,gBAAgB,kBAAlB,EADmB;AAE5BC,UAAQ,MAFoB;AAG5BC,QAAMC,KAAKC,SAAL,CAAeP,OAAf;AAHsB,EAA7B,EAKEQ,KALF,CAKQ,UAACC,CAAD,EAAO;AAAEC,UAAQC,GAAR,CAAYF,CAAZ;AAAiB,EALlC;AAMA;;AAEM,SAASb,WAAT,CAAqBG,EAArB,EAAyBa,OAAzB,EAAkC;AACxCd,gBAAeC,EAAf,EAAmB;AAClBc,kBAAgB,QADE;AAElBC,aAAW;AACVf,OAAIA;AADM,GAFO;AAKlBa,WAAS;AACRG,SAAMH;AADE;AALS,EAAnB;AASA;;AAEM,SAASf,WAAT,CAAqBmB,IAArB,EAA2BJ,OAA3B,EAAoC;AAC1C,MAAI,IAAIK,IAAI,CAAZ,EAAeA,IAAID,KAAKE,MAAxB,EAAgCD,GAAhC,EAAqC;AACpCrB,cAAYoB,KAAKC,CAAL,EAAQlB,EAApB,EAAwBa,OAAxB;AACA;AACD","file":"functions.js","sourcesContent":["import fetch from 'node-fetch';\n\nfunction pushToFacebook(id, payload) {\n\tconst url = 'https://graph.facebook.com/v2.6/me/messages?access_token=';\n\tconst pageAccessToken = 'token'\n\t\n\tfetch(url + pageAccessToken, {\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tmethod: \"POST\",\n\t\tbody: JSON.stringify(payload)\t  \t\n\t})\n\t\t.catch((e) => { console.log(e); });\n}\n\nexport function pushMessage(id, message) {\n\tpushToFacebook(id, {\n\t\tmessaging_type: 'UPDATE',\n\t\trecipient: {\n\t\t\tid: id\n\t\t},\n\t\tmessage: {\n\t\t\ttext: message\n\t\t}\n\t});\n}\n\nexport function sendToAllFb(rows, message) {\n\tfor(var i = 0; i < rows.length; i++) {\n\t\tpushMessage(rows[i].id, message);\n\t}\n}"]}